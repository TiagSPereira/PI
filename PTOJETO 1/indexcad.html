<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PROJETO INTEGRADOR</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="./stylecad.css">
</head>
<h2 class="principal">PROCESSOS ADMINISTRATIVOS</h2>

<body>


  <header>

    <img class="logo" src="./img/download (1).png" alt="">
    <h2 class="titulo"><i>CADASTRO DE PROCESSOS</i></h2>


  </header>

  <form action="./index.html">

    <div class="form" id="form">
      <div class="d-flex justify-content-start">
        <div class="mb+3">
          <label for="inputName" class="form-label text-primary">Nome </label>
          <input class="text1" id="inputName" placeholder="Seu Nome" required></textarea>
        </div>
        <div class="d-flex justify-content-end">
          <div class="px-5">
            <label for="inputProcess" class="form-label text-primary">NÂº Processo </label>
            <input class="text4" id="inputProcess" placeholder="00000000" required></textarea>
          </div>
        </div>
      </div>

      <div class="d-flex justify-content-start">
        <div class="mb+3">
          <label for="inputMail" class="form-label text-primary">Email</label>
          <input class="text2" id="inputMail" placeholder="Informe seu email" required></textarea>
        </div>
        <div class="d-flex justify-content-end">
          <div class="px-5">
            <label for="inputData" class="form-label text-primary">Data Entrada</label>
            <input class="text5" id="inputData" placeholder="00/00/0000" required></textarea>
          </div>
        </div>
      </div>
      <div class="d-flex justify-content-start">
        <div class="mb+3">
          <label for="inputCPF" class="form-label text-primary">CPF</label>
          <input class="text3" id="inputCPF" placeholder="000.000.000-00" required></textarea>
        </div>
        <div class="d-flex justify-content-end">
          <div class="px-5">
            <label for="inputDep" class="form-label text-primary">Departamento</label>
            <input class="text6" id="inputDep" placeholder="Informe o Departamento" required></textarea>
          </div>
        </div>

        <div class="d-flex justify-content-start mb-3">
          <button id = "submeter" type="submit" class="btn btn-primary p-3 text-decoration-underline">SALVAR</button>
        </div>
      </div>
  </form>
  <nav>
    <ul>
      <a href="./index.html">
        <li class="text-center mb-5 ">RETORNAR</li>
      </a>
    </ul>
  </nav>
      <script src = "https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
      <script src = "./main.js"></script>
      <script type = "module">
         // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
        import { getDatabase, ref, set, child, get} from "https://www.gstatic.com/firebasejs/10.11.0/firebase-database.js";
          
          // Your web app's Firebase configuration
          const firebaseConfig = {
            apiKey: "AIzaSyCwQnsy4RGZOV2E6XF5pVZ4496IV39c9s4",
            authDomain: "piunivesp-e81af.firebaseapp.com",
            databaseURL: "https://piunivesp-e81af-default-rtdb.firebaseio.com",
            projectId: "piunivesp-e81af",
            storageBucket: "piunivesp-e81af.appspot.com",
            messagingSenderId: "37066626111",
            appId: "1:37066626111:web:1a6d01533fe00b76ffd48a"
          };

          // Initialize Firebase
          const app = initializeApp(firebaseConfig);

          const db = getDatabase(app);
          
          document.getElementById("submeter").addEventListener("click", setData);
          
          function setData(e){
              e.preventDefault();
              set(ref(db, 'Process/' + document.getElementById("inputProcess").value),{
                entryData: document.getElementById("inputData").value,
                department: document.getElementById("inputDep").value,
                userId: {nameUser: document.getElementById("inputName").value,
                          mailUser: document.getElementById("inputMail").value,
                            documentUser: document.getElementById("inputCPF").value, }
                })
                .then(()=>{
                alert("Dados gravados com sucesso!");
                })
                .catch((error)=>{
                alert("Falha ao gravar dados");
                console.log(error);
                })
              }

      </script>
      
   </body>
</html>